(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-cc66e958"],{"1a31":function(t,e,a){"use strict";a("f4d8")},"49af":function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"main"},[a("el-card",{staticClass:"box-card",attrs:{shadow:"never"}},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:5}},[a("div",{staticClass:"grid-content bg-purple-dark"},[a("div",{staticClass:"block"},[a("el-date-picker",{attrs:{type:"month","value-format":"yyyy-MM",placeholder:"选择月份",editable:!1},on:{change:t.showDateMonth},model:{value:t.Datemonth,callback:function(e){t.Datemonth=e},expression:"Datemonth"}})],1)])]),a("el-col",{attrs:{span:18}},[a("div",{staticClass:"grid-content bg-purple-light"},[a("el-button",{attrs:{type:"primary"},on:{click:t.instant}},[t._v("本月")]),a("el-button",{attrs:{type:"primary"},on:{click:t.lastMonth}},[t._v("上月")]),a("el-button",{attrs:{type:"primary"},on:{click:t.nextMonth}},[t._v("下月")]),a("el-button",{attrs:{type:"primary"},on:{click:t.setTable}},[t._v(t._s(t.setTableText))])],1)])],1)],1),t.showpicker?a("div",{staticClass:"text item"},[a("div",{staticClass:"header-name"},[t._v("项目名称："+t._s(t.projectname))]),[a("Datepicker",{ref:"Datepicker",staticClass:"calendar",attrs:{options:t.calendarArr},on:{handleClickDay:t.handleClickDay,handlePrevMonth:t.handlePrevMonth,handleNextMonth:t.handleNextMonth,handleGoMyMonth:t.handleGoMyMonth}})]],2):a("div",{staticClass:"text item tablestyle"},[[a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.tableData}},[a("el-table-column",{attrs:{prop:"statDate",label:"日期",width:"180"}}),a("el-table-column",{attrs:{prop:"week",label:"星期",width:"180"}}),a("el-table-column",{attrs:{prop:"everydayFill",label:"每日上报组(上报)",width:"180"}}),a("el-table-column",{attrs:{prop:"everydayMissNum",label:"每日上报组(缺报)"}}),a("el-table-column",{attrs:{prop:"allFill",label:"全部上报"}}),a("el-table-column",{attrs:{prop:"totalHour",label:"总上报工时"}})],1)]],2)])],1)},o=[],s=(a("d3b7"),a("159b"),a("ac1f"),a("5319"),a("14d9"),a("ff48")),r={data:function(){return{showpicker:!0,projectname:null,setTableText:"表格",Datemonth:"",Dateweek:"",projectId:"",tableData:[],lastwevalwekval:1,lastmonthStep:1,weekArr:["星期日","星期一","星期二","星期三","星期四","星期五","星期六"],calendarArr:{type:"combination",headStyle:{todayBtn:"right",combination:"center",checkBtn:"right"},viewStyle:{day:"right"},calendarData:[],monthDate:"",hourDetail:[],showcontent:2,lastMonthval:0}}},created:function(){this.projectId=this.$route.query.projectId,this.projectname=this.$route.query.projectname,this.showdta(),this.setWeekDay(),this.init()},methods:{showdta:function(){},init:function(){var t=this;Object(s["c"])(this.Dateweek,this.projectId).then((function(e){200==e.code&&(t.tableData=e.data,t.tableData.forEach((function(e){var a=new Date(Date.parse(e.statDate.replace(/-/g,"/")));e.week=t.weekArr[a.getDay()]})))})),this.setProjectHourStatCalendar()},setProjectHourStatCalendar:function(){var t=this;Object(s["e"])(this.Dateweek,this.projectId).then((function(e){200==e.code&&(console.log("getProjectHourStatCalendar",e),t.$refs.Datepicker.handleGoMyMonth(t.Dateweek),t.calendarArr.hourDetail=e.data,t.$refs.Datepicker.init())}))},gettabledata:function(){var t=this;Object(s["c"])(this.Dateweek,this.projectId).then((function(e){200==e.code&&(t.tableData=e.data,t.tableData.forEach((function(e){var a=new Date(Date.parse(e.statDate.replace(/-/g,"/")));e.week=t.weekArr[a.getDay()]})))}))},showDateMonth:function(t){if(null==t)this.veckans();else{var e=t.split("-"),a=e[0],n=e[1],o={};console.log("mm",n),o.localDate=a+"-"+n+"-01",o.projectId=this.projectId,this.Dateweek=o.localDate,this.init()}},veckans:function(){this.lastwevalwekval=1,this.setWeekDay(),this.init()},lastWeek:function(){var t={};t.localDate=this.getMonday("s",-this.lastwevalwekval),t.projectId=this.projectId,this.Dateweek=t,this.init(),this.lastwevalwekval++},instant:function(){var t=new Date,e=(t.getFullYear(),t.getMonth()+1);e=e<10?"0"+e:e;var a={};a.localDate=this.getMonth("s",0),this.lastMonthval=0,a.projectId=this.projectId,this.Dateweek=a.localDate,this.Datemonth=a.localDate,this.init()},allData:function(){alert("所有")},lastMonth:function(){console.log("上月",this.Datemonth),this.lastMonthval++;var t={};t.startDate=this.getMonth("s",-this.lastMonthval),console.log("上月",this.getMonth("s",-this.lastMonthval)),this.Dateweek=t.startDate,this.Datemonth=t.startDate,this.gettabledata(),this.setProjectHourStatCalendar(),this.$refs.Datepicker.handlePrevMonth(),console.log(this.lastMonthval)},nextMonth:function(){console.log("下月"),this.lastMonthval--,console.log(this.lastMonthval);var t={};t.startDate=this.getMonth("s",-this.lastMonthval),console.log("下月",t),this.Dateweek=t.startDate,this.Datemonth=t.startDate,this.gettabledata(),this.setProjectHourStatCalendar(),this.$refs.Datepicker.handleNextMonth()},setTable:function(){console.log("表格"),this.showpicker=!this.showpicker,this.showpicker?this.setTableText="表格":this.setTableText="返回"},handleEdit:function(t,e){var a=this.projectId,n=e.statDate;this.$router.push({path:"/projectManagement/tadayForHour",query:{projectId:a,statDate:n}})},setWeekDay:function(){var t={};t.startDate=this.getMonth("s",0),t.endDate=this.getMonth("e",0),this.lastMonthval=0,t.projectId=this.projectId,this.Dateweek=t.startDate,this.Datemonth=t.startDate},theWeek:function(){var t=new Date,e=t.getYear();e<1e3&&(e+=1900);var a=new Array(12);return a[0]=31,a[2]=31,a[3]=30,a[4]=31,a[5]=30,a[6]=31,a[7]=31,a[8]=30,a[9]=31,a[10]=30,a[11]=31,Math.round(t.getYear()/4)==t.getYear()/4?a[1]=29:a[1]=28,a},setDateMonthday:function(){this.getMonday("s",0),this.getMonday("e",0)},getMonday:function(t,e){var a=new Date,n=a.getTime(),o=a.getDay(),s=864e5,r=7*s*(e||0),l=null;"s"==t&&(l=n-(o-1)*s+r),"e"==t&&(l=n+(7-o)*s+r),l=new Date(l);var i=l.getFullYear(),c=l.getMonth()+1,h=l.getDate();c=c<10?"0"+c:c,h=h<10?"0"+h:h;var d=i+"-"+c+"-"+h;return d},handleClickDay:function(){},handlePrevMonth:function(){},handleNextMonth:function(){},handleGoMyMonth:function(){},getMonth:function(t,e){var a=new Date,n=a.getFullYear(),o=a.getMonth()+1;Math.abs(e)>12&&(e%=12),0!=e&&(o+e>12?(n++,o=(o+e)%12):o+e<1?(n--,o=12+o+e):o+=e),o=o<10?"0"+o:o;a.getDate();var s=n+"-"+o+"-01",r="";r="01"==o||"03"==o||"05"==o||"07"==o||"08"==o||"10"==o||"12"==o?n+"-"+o+"-31":"02"==o?n%4==0&&n%100!=0||n%100==0&&n%400==0?n+"-"+o+"-29":n+"-"+o+"-28":n+"-"+o+"-30";var l="";return l="s"==t?s:r,l}}},l=r,i=(a("1a31"),a("2877")),c=Object(i["a"])(l,n,o,!1,null,"4a058b28",null);e["default"]=c.exports},f4d8:function(t,e,a){},ff48:function(t,e,a){"use strict";a.d(e,"c",(function(){return o})),a.d(e,"d",(function(){return s})),a.d(e,"a",(function(){return r})),a.d(e,"b",(function(){return l})),a.d(e,"e",(function(){return i}));var n=a("b775");function o(t,e){return Object(n["a"])({url:"/system/project/hour/stat/fill?localDate="+t+"&projectId="+e,method:"get"})}function s(t){return Object(n["a"])({url:"/system/project/hour/stat/fill/detail",method:"get",params:t})}function r(t){return Object(n["a"])({url:"/system/project/hour/project/posts?projectId="+t,method:"get"})}function l(t){return Object(n["a"])({url:"/system/project/hour/project/users?projectId="+t,method:"get"})}function i(t,e){return Object(n["a"])({url:"/system/project/hour/stat/calendar?localDate="+t+"&projectId="+e,method:"get"})}}}]);