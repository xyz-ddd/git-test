(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-788f951a","chunk-18aef3bc"],{"0747":function(t,e,a){"use strict";a("6883")},"2f23":function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"main"},[a("el-dialog",{attrs:{title:"提示",visible:t.dialogVisible,width:"30%","before-close":t.handleClose},on:{"update:visible":function(e){t.dialogVisible=e}}},[a("span",[[a("el-radio-group",{model:{value:t.radio,callback:function(e){t.radio=e},expression:"radio"}},t._l(t.myProject,(function(e){return a("el-radio",{key:e.projectId,attrs:{label:e.projectId},on:{change:t.showradio}},[t._v(t._s(e.projectName))])})),1)]],2),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:t.Close}},[t._v("取 消")]),a("download-excel",{staticClass:"btn btn-default",attrs:{data:t.json_data,fields:t.json_fields,type:t.type,name:"工作日志.xls","before-finish":t.myclick}},[a("el-button",{attrs:{type:"primary"}},[t._v("确 定")])],1)],1)])],1)},o=[],r=(a("d3b7"),a("159b"),a("79d4")),s={data:function(){return{dialogVisible:!1,status:null,radio:null,localDate:"",type:"xlsx",myProject:[],json_fields:{"人员姓名":"nickName","服务项目":"projectName","技术类型":"postName","日期":"date","工作内容":"daily","时长":{callback:function(t){return"".concat(t.useHour,"小时")}},"考勤":"attendance"},json_data:[]}},methods:{open:function(){var t=this;Object(r["n"])().then((function(e){200==e.code&&(t.myProject=e.data,t.dialogVisible=!0)}))},Close:function(){this.radio=null,this.dialogVisible=!1,1==this.status?(this.$parent.defaultbtn=!1,this.$parent.defaultbtntb=!0):(this.$parent.defaultbtn=!0,this.$parent.defaultbtntb=!1)},handleExport:function(){var t=this;console.log(this.radio);var e={};e.localDate=this.localDate,e.projectId=this.radio,Object(r["w"])(e).then((function(e){200==e.code&&(console.log(t.radio),e.data.fillInfos.forEach((function(t){t.nickName=e.data.nickName,t.postName=e.data.postName,t.projectId=e.data.projectId,t.projectName=e.data.projectName,1==t.status&&(t.attendance="已填报"),2==t.status&&(t.attendance="未填报"),3==t.status&&(t.attendance="无需填报"),4==t.status&&(t.attendance="节假日"),5==t.status&&(t.attendance="请假"),6==t.status&&(t.attendance="调休"),null==t.useHour&&(t.useHour=0)})),t.json_data=e.data.fillInfos,console.log(t.json_data))}))},showradio:function(t){console.log(t),console.log(this.radio),this.handleExport()},myclick:function(){this.radio=null,this.dialogVisible=!1,1==this.status?(this.$parent.defaultbtn=!1,this.$parent.defaultbtntb=!0):(this.$parent.defaultbtn=!0,this.$parent.defaultbtntb=!1)},handleClose:function(t){t()}}},i=s,l=(a("67a1"),a("2877")),u=Object(l["a"])(i,n,o,!1,null,"3fa8bb67",null);e["default"]=u.exports},"2fbe":function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"main"},[a("el-card",{staticClass:"box-card",attrs:{shadow:"never"}},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",[a("el-date-picker",{attrs:{format:"yyyy-MM","value-format":"yyyy-MM-dd","default-value":"","default-time":"",clearable:!1,editable:!1,type:"month",placeholder:"选择月"},on:{change:function(e){return t.changeMonth(t.datetayMonth)}},model:{value:t.datetayMonth,callback:function(e){t.datetayMonth=e},expression:"datetayMonth"}})],1),a("el-button",{staticStyle:{"margin-left":"1%"},attrs:{type:"primary",size:"medium",disabled:t.selectDatePicker},on:{click:t.getMonth}},[t._v(" 查询 ")]),a("el-button",{attrs:{type:"primary"},on:{click:t.getToday}},[t._v("本月")]),a("el-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["mh:hour:stat"],expression:"['mh:hour:stat']"}],attrs:{type:"primary",plain:""},on:{click:t.ExportStat}},[t._v("导出记录 ")]),a("el-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["mh:hour:stat"],expression:"['mh:hour:stat']"}],attrs:{type:"primary",plain:""},on:{click:t.showStateProject}},[t._v("按项目统计 ")])],1),a("div",{staticClass:"text item"},[a("el-descriptions",{attrs:{title:"统计",column:4,direction:"vertical",border:""}},[a("el-descriptions-item",{attrs:{label:"应报"}},[t._v(t._s(t.mustFillNum)+"天 ")]),a("el-descriptions-item",{attrs:{label:"上报天数"}},[t._v(t._s(t.fillNum)+"天（含加班） ")]),a("el-descriptions-item",{attrs:{label:"加班天数"}},[t._v(t._s(t.overtimeNum)+"天 ")]),a("el-descriptions-item",{attrs:{label:"缺报"}},[t._v(t._s(t.missFillNum)+"天 ")]),a("el-descriptions-item",{attrs:{label:"请假"}},[t._v(t._s(t.leaveNum)+"天 ")]),a("el-descriptions-item",{attrs:{label:"调休"}},[t._v(t._s(t.paidLeave)+"天 ")]),a("el-descriptions-item",{attrs:{label:"小计"}},[t._v(t._s(t.mustFillNum)+"天（含加班） ")])],1),a("div",{staticStyle:{"font-size":"large","margin-top":"10px"}},[t._v(" 总计上报： "+t._s((t.totalHour/t.$store.state.user.appconfig.workTime).toFixed(2))+"人天（"+t._s(t.totalHour)+"工时） ")]),a("hr")],1),a("div",{staticClass:"text item"},[a("el-button-group",[a("el-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["mh:hour:stat:detail"],expression:"['mh:hour:stat:detail']"}],attrs:{type:"primary",plain:t.defaultbtn},on:{click:t.showdetail}},[t._v("日历模式 ")]),a("el-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["mh:hour:stat"],expression:"['mh:hour:stat']"}],attrs:{type:"primary",plain:t.defaultbtntb},on:{click:t.showstreamline}},[t._v("表格模式 ")])],1),a("a",{staticClass:"abnfSet",on:{click:t.setConfig}},[t._v(" 设为默认")])],1),a("div",{staticClass:"text item"},[t.showStreamline?a("div",{staticClass:"streamline"},[[a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.projectList,border:""}},[a("el-table-column",{attrs:{type:"index",label:"序号",align:"center",width:"52px"}}),a("el-table-column",{attrs:{prop:"date",label:"日期",align:"center",width:"109px"}}),a("el-table-column",{attrs:{prop:"status",label:"状态",align:"center",width:"109px"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",[1==e.row.status?a("el-tag",[a("i",{staticClass:"el-icon-check"}),t._v(" 已填报 ")]):2==e.row.status?a("el-tag",{attrs:{type:"danger"}},[a("i",{staticClass:"el-icon-close"}),t._v(" 缺报 ")]):3==e.row.status?a("el-tag",{attrs:{type:"info"}},[a("i",{staticClass:"el-icon-minus"}),t._v(" 无需填报 ")]):4==e.row.status?a("el-tag",{attrs:{type:"success"}},[a("i",{staticClass:"el-icon-magic-stick"}),t._v(" 节假日 ")]):5==e.row.status?a("el-tag",{attrs:{type:"warning"}},[a("i",{staticClass:"el-icon-close-notification"}),t._v(" 请假 ")]):6==e.row.status?a("el-tag",{attrs:{type:"warning"}},[a("i",{staticClass:"el-icon-refresh"}),t._v(" 调休 ")]):t._e()],1)]}}],null,!1,2602440133)}),a("el-table-column",{attrs:{prop:"totalHour",label:"上报工时",align:"center",width:"80"}}),a("el-table-column",{attrs:{prop:"useHour",label:"详情",align:"center","min-width":"200"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.row.projectHours,border:!1,"show-header":!1}},[a("el-table-column",{attrs:{prop:"projectName",label:"项目",align:"center"}}),a("el-table-column",{attrs:{prop:"useHour",label:"工时",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.useHour)+"小时")])]}}],null,!0)}),a("el-table-column",{attrs:{prop:"daily",label:"日志",align:"center"}})],1)],1)]}}],null,!1,252131399)}),a("el-table-column",{attrs:{label:"操作",align:"center",width:"120"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.id?a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){return t.handleClick(e.row,e.$index)}}},[t._v("查看详情 ")]):t._e()]}}],null,!1,415549652)}),a("el-table-column",{attrs:{prop:"fillTime",label:"上报时间",width:"80",align:"center"}})],1)]],2):a("div",{staticClass:"detail"},[[a("Datepicker",{ref:"Datepicker",staticClass:"calendar",attrs:{options:t.calendarArr},on:{handleClickDay:t.handleClickDay,handlePrevMonth:t.handlePrevMonth,handleNextMonth:t.handleNextMonth,handleGoMyMonth:t.handleGoMyMonth}})]],2)])]),a("el-dialog",{attrs:{title:"项目工时详情",visible:t.projectDialog,width:"30%","before-close":t.handleClose},on:{"update:visible":function(e){t.projectDialog=e}}},[[a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.StatProject}},[a("el-table-column",{attrs:{type:"index",label:"序号",align:"center"}}),a("el-table-column",{attrs:{prop:"projectName",label:"项目名称",align:"center"}}),a("el-table-column",{attrs:{prop:"useHour",label:"工时",align:"center"}})],1)],a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:t.closeForm}},[t._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:t.closeForm}},[t._v("确 定")])],1)],2),a("SelectPeoject",{ref:"SelectPeoject"}),a("workingInfoForm",{ref:"workingInfoForm"})],1)},o=[],r=(a("4de4"),a("d3b7"),a("159b"),a("e9c4"),a("ac1f"),a("5319"),a("14d9"),a("7db0"),a("d81d"),a("79d4")),s=a("2f23"),i=a("d062"),l={components:{SelectPeoject:s["default"],workingInfoForm:i["default"]},data:function(){return{projectDialog:!1,selectDatePicker:!1,defaultbtn:!1,defaultbtntb:!0,statusbtn:1,showEvents:!0,dataMonth:"",dataMonthtemp:"",datetayMonth:"",stat:[],projectList:[],Calendar:new Date,detailInfo:[],demoEvents:[],showEvemts:!1,total:0,queryParams:{pageNum:1,pageSize:10,dataMonth:""},calendarArr:{type:"combination",headStyle:{todayBtn:"right",combination:"center",checkBtn:"right"},viewStyle:{day:"right"},calendarData:[],monthDate:"",hourDetail:[],showcontent:1},StatProject:[],tableData:[],mergeCells:[],mergeFooterItems:[],EveryList:[{label:"临时上报",value:!1},{label:"每日上报",value:!0}],onQuery:!0,showStreamline:!1,isTable:!0}},created:function(){this.gettayMonth(),this.init(),this.getConfig()},computed:{fillNum:function(){return this.stat.filter((function(t){return 1==t.status})).length},mustFillNum:function(){return this.stat.filter((function(t){return 4!=t.status})).length},missFillNum:function(){return this.stat.filter((function(t){return 2==t.status})).length},overtimeNum:function(){return this.stat.filter((function(t){return 1==t.status&&1==t.type})).length},leaveNum:function(){return this.stat.filter((function(t){return 5==t.status})).length},paidLeave:function(){return this.stat.filter((function(t){return 6==t.status})).length},totalHour:function(){var t=0;return this.stat.forEach((function(e){null!=e.projectHours&&e.projectHours.forEach((function(e){return t+=e.useHour}))})),Math.round(t)}},methods:{setConfig:function(){localStorage.setItem("defaultbtn",this.defaultbtn),localStorage.setItem("showStreamline",this.showStreamline),this.$message.success("已设置成功")},getConfig:function(){var t=localStorage.getItem("defaultbtn");this.defaultbtn="true"==t;var e=localStorage.getItem("showStreamline");"true"==e?(this.showStreamline=!0,this.isTable=!1):(this.showStreamline=!1,this.isTable=!1),this.defaultbtntb=!this.defaultbtn,this.onQuery=!this.showStreamline},monthChange:function(t){},dayChange:function(t){},init:function(){var t=this,e=this.datetayMonth;Object(r["r"])(e).then((function(e){200==e.code&&(t.calendarArr.hourDetail=e.data)})),Object(r["h"])(e).then((function(e){200==e.code&&(t.stat=e.data,console.log("this.stat",t.stat),t.projectList=e.data,t.projectList.forEach((function(t){t.totalHour=0,null!=t.projectHours&&t.projectHours.forEach((function(e){t.totalHour+=e.useHour}))})))})),Object(r["x"])(e).then((function(e){200==e.code&&(t.StatProject=e.data)}))},getHourDetail:function(){var t=this;this.queryParams.date=this.datetayMonth;var e={date:"2023-04-01"};Object(r["i"])(e).then((function(e){200==e.code&&(t.detailInfo=e.rows,t.total=e.total)}))},gettayMonth:function(){var t=new Date,e=t.getFullYear(),a=t.getMonth()+1,n="01";a<10&&(a="0"+a);var o=e+"-"+a+"-"+n;this.datetayMonth=o},changeMonth:function(t){null==t?(this.$$message.error("必须选择日期"),this.selectDatePicker=!0):this.selectDatePicker=!1,this.dataMonth=t,this.dataMonthtemp=Object.assign("",JSON.parse(JSON.stringify(t)))},getToday:function(){this.gettayMonth();this.dataMonth.replace(/-/g,"/");this.$refs.Datepicker.handleToday(),this.init()},getMonth:function(){if(!this.dataMonth)return this.dataMonth=this.dataMonthtemp,alert("已显示当前月"),0;var t=this.dataMonth.replace(/-/g,"/");this.$EventCalendar.toDate(t),this.onQuery&&this.$refs.Datepicker.handleGoMyMonth(this.dataMonth),this.init()},showStateProject:function(){this.defaultbtn=!0,this.defaultbtntb=!0,this.projectDialog=!0},closeForm:function(){1==this.statusbtn?(this.defaultbtn=!1,this.defaultbtntb=!0):2==this.statusbtn&&(this.defaultbtn=!0,this.defaultbtntb=!1),this.projectDialog=!1},showstreamline:function(){this.statusbtn=2,this.defaultbtn=!0,this.defaultbtntb=!1,this.showStreamline=!0,this.onQuery=!1},showdetail:function(){this.statusbtn=1,this.defaultbtn=!1,this.defaultbtntb=!0,this.showStreamline=!1,this.onQuery=!0},handleClose:function(t){t()},loadList:function(){for(var t=[],e=0;e<15;e++)t.push({a:"a"+e,b:"b"+e,c:"c"+e,d:"d"+e,e:"e"+e,f:"f"+e,g:"g"+e,h:"h"+e,i:"i"+e,j:"j"+e,k:"k"+e,l:"l"+e,m:"m"+e,n:"n"+e,o:"o"+e,p:"p"+e,q:"q"+e,r:"r"+e,s:"s"+e,t:"t"+e,u:"u"+e,v:"v"+e,w:"w"+e});this.tableData=t,this.handleMerge()},handleMerge:function(){var t=[{row:0,col:1,rowspan:2,colspan:1},{row:0,col:2,rowspan:2,colspan:1},{row:0,col:3,rowspan:2,colspan:1},{row:0,col:7,rowspan:2,colspan:1},{row:2,col:1,rowspan:2,colspan:1},{row:2,col:2,rowspan:2,colspan:1},{row:2,col:3,rowspan:2,colspan:1},{row:2,col:7,rowspan:2,colspan:1},{row:4,col:1,rowspan:2,colspan:1},{row:4,col:2,rowspan:2,colspan:1},{row:4,col:3,rowspan:2,colspan:1},{row:4,col:7,rowspan:2,colspan:1}],e=[];this.mergeCells=t,this.mergeFooterItems=e},formatterEvery:function(t){var e=t.cellValue,a=this.EveryList.find((function(t){return t.value===e}));return a?a.label:""},footerMethod:function(t){var e=t.columns;return[e.map((function(t,e){return e})),e.map((function(t,e){return 1e3+e}))]},handleClickDay:function(t){if(!t.showday)return 0;var e=null;if(t.projectData.forEach((function(t){e=t.id})),5==t.mystatus||6==t.mystatus)return this.$message.warning("已请假/调休，无记录"),0;2==t.mystatus?this.$message.warning("未填报，无记录"):(this.$refs.workingInfoForm.id=e,this.$refs.workingInfoForm.fillDate=t.mydate,this.$refs.workingInfoForm.open())},handlePrevMonth:function(){},handleNextMonth:function(){},handleGoMyMonth:function(){},handleClick:function(t,e){var a=t.id;if(5==t.status||6==t.status)return this.$message.warning("已请假/调休，无记录"),0;2==t.status?this.$message.warning("未填报，无记录"):(this.$refs.workingInfoForm.id=a,this.$refs.workingInfoForm.fillDate=t.mydate,this.$refs.workingInfoForm.open())},ExportStat:function(){this.defaultbtn=!0,this.defaultbtntb=!0,this.$refs.SelectPeoject.localDate=this.datetayMonth,this.$refs.SelectPeoject.status=this.statusbtn,this.$refs.SelectPeoject.open()}}},u=l,c=(a("0747"),a("2877")),d=Object(c["a"])(u,n,o,!1,null,"7ef2e636",null);e["default"]=d.exports},"67a1":function(t,e,a){"use strict";a("e4d1")},6883:function(t,e,a){},"79d4":function(t,e,a){"use strict";a.d(e,"y",(function(){return o})),a.d(e,"c",(function(){return r})),a.d(e,"A",(function(){return s})),a.d(e,"d",(function(){return i})),a.d(e,"f",(function(){return l})),a.d(e,"g",(function(){return u})),a.d(e,"v",(function(){return c})),a.d(e,"H",(function(){return d})),a.d(e,"e",(function(){return h})),a.d(e,"n",(function(){return f})),a.d(e,"q",(function(){return m})),a.d(e,"l",(function(){return p})),a.d(e,"m",(function(){return b})),a.d(e,"j",(function(){return g})),a.d(e,"b",(function(){return y})),a.d(e,"z",(function(){return j})),a.d(e,"a",(function(){return v})),a.d(e,"k",(function(){return w})),a.d(e,"I",(function(){return k})),a.d(e,"h",(function(){return _})),a.d(e,"i",(function(){return x})),a.d(e,"D",(function(){return S})),a.d(e,"F",(function(){return C})),a.d(e,"E",(function(){return O})),a.d(e,"B",(function(){return H})),a.d(e,"C",(function(){return T})),a.d(e,"G",(function(){return I})),a.d(e,"t",(function(){return M})),a.d(e,"u",(function(){return D})),a.d(e,"s",(function(){return $})),a.d(e,"w",(function(){return N})),a.d(e,"r",(function(){return P})),a.d(e,"x",(function(){return E})),a.d(e,"o",(function(){return L})),a.d(e,"p",(function(){return F}));a("99af");var n=a("b775");function o(){return Object(n["a"])({url:"/system/project/work/list",method:"get"})}function r(t){return Object(n["a"])({url:"/system/project/create",method:"post",data:t})}function s(t){return Object(n["a"])({url:"/system/project/list",method:"get",params:t})}function i(t){return Object(n["a"])({url:"/system/project/remove?projectId="+t,method:"delete"})}function l(){return Object(n["a"])({url:"/system/user/box",method:"get"})}function u(t){return Object(n["a"])({url:"/system/dict/data/type/"+t,method:"get"})}function c(t){return Object(n["a"])({url:"/system/project/list?projectStatus="+t,method:"get"})}function d(t,e){var a={projectId:t,projectStatus:e};return Object(n["a"])({url:"/system/project/status",method:"put",params:a})}function h(t){return Object(n["a"])({type:"form",url:"/system/project/enable",method:"put",data:t})}function f(){return Object(n["a"])({url:"/system/project/user/my/project/all",method:"get"})}function m(t){return Object(n["a"])({url:"/system/project/user/my/project/all?projectStatus="+t,method:"get"})}function p(t,e){return Object(n["a"])({url:"/mh/hour/list?endDate=".concat(t,"&startDate=").concat(e),method:"get"})}function b(t){return Object(n["a"])({url:"/mh/hour/list/miss",method:"get",params:t})}function g(t){return Object(n["a"])({url:"/system/project/user/my/project?date="+t,method:"get"})}function y(t){return Object(n["a"])({url:"/mh/hour/create",method:"post",data:t})}function j(t,e){return Object(n["a"])({url:"/mh/hour/leave?leaveDate="+t+"&leaveType="+e,method:"post"})}function v(t){return Object(n["a"])({url:"/mh/hour/unLeave?id="+t,method:"post"})}function w(t){return Object(n["a"])({url:"/mh/hour/detail?hourId="+t,method:"get"})}function k(t){return Object(n["a"])({url:"/mh/hour/edit",method:"put",data:t})}function _(t){return Object(n["a"])({url:"/mh/hour/stat?date="+t,method:"get"})}function x(t){return Object(n["a"])({url:"/mh/hour/stat/detail",method:"get",params:t})}function S(t){return Object(n["a"])({url:"/system/project/hour/stat",method:"get",params:t})}function C(t){return Object(n["a"])({url:"/system/project/hour/stat",method:"get",params:t})}function O(t){return Object(n["a"])({url:"/system/project/hour/stat/fill/detail?date=".concat(t.date,"&projectId=").concat(t.projectId),method:"get"})}function H(t){return Object(n["a"])({url:"/system/project/hour/stat/hour/month?projectId="+t,method:"get"})}function T(t){return Object(n["a"])({url:"/system/project/hour/stat/hour/month/detail",method:"get",params:t})}function I(t){return Object(n["a"])({url:"/system/project/hour/stat/hour/user?projectId=".concat(t),method:"get"})}function M(t){return Object(n["a"])({url:"/system/project/hour/daily/calendar",method:"get",params:t})}function D(t){return Object(n["a"])({url:"/system/project/hour/daily/calendar/detail",method:"get",params:t})}function $(t){return Object(n["a"])({url:"/system/project/hour/daily/list",method:"get",params:t})}function N(t){return Object(n["a"])({url:"/mh/hour/stat/export",method:"get",params:t})}function P(t){return Object(n["a"])({url:"/mh/hour/calendar?date="+t,method:"get"})}function E(t){return Object(n["a"])({url:"/mh/hour/stat/project?date="+t,method:"get"})}function L(t){return Object(n["a"])({url:"/system/project/user/my/project/list",method:"get",params:t})}function F(t){return Object(n["a"])({url:"/system/project/user/my/project/list?projectStatus="+t,method:"get"})}},a14c:function(t,e,a){},c9ed:function(t,e,a){"use strict";a("a14c")},d062:function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"main"},[a("el-dialog",{attrs:{title:"工时详情  "+t.fillDate,visible:t.centerDialogVisible,width:"46%","close-on-click-modal":!1},on:{"update:visible":function(e){t.centerDialogVisible=e},close:t.beforeClose}},[a("div",{staticClass:"infoOne"},[a("el-form",{attrs:{inline:!1,"label-width":"300px"}},[t._l(t.projectList,(function(e,n){return a("el-form-item",{key:n,attrs:{prop:"item.projectName"}},[a("el-card",{staticClass:"box-card",attrs:{shadow:"never"}},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",{staticClass:"projectLabel"},[t._v(t._s(e.projectName)+" ")])]),a("div",{staticStyle:{display:"flex","justify-content":"flex-end"}},[a("el-select",{staticStyle:{"margin-right":"auto",width:"auto"},attrs:{placeholder:"请选择工作类型"},model:{value:e.workTypeId,callback:function(a){t.$set(e,"workTypeId",a)},expression:"item.workTypeId"}},t._l(t.workTypeSelect,(function(t){return a("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})})),1),a("el-input",{staticStyle:{width:"50%"},attrs:{type:"number",max:24,maxlength:"2",placeholder:"工时",oninput:"value=value.replace(/[^0-9.]/g,'')"},on:{input:function(a){return t.lookinput(e.useHour)}},model:{value:e.useHour,callback:function(a){t.$set(e,"useHour",t._n(a))},expression:"item.useHour"}}),a("span",{staticStyle:{margin:"0 10px"}},[t._v("小时")])],1),a("hr"),a("el-input",{staticStyle:{"margin-top":"5px",width:"100%"},attrs:{type:"textarea",rows:2,maxlength:"200","show-word-limit":"",autosize:{minRows:2,maxRows:3},placeholder:"请填写日志"},model:{value:e.daily,callback:function(a){t.$set(e,"daily",a)},expression:"item.daily"}})],1)],1)})),a("el-form-item",{attrs:{label:"总计"}},[a("div",{staticStyle:{display:"flex","justify-content":"flex-end"}},[a("el-input",{staticStyle:{width:"20%"},attrs:{max:24,autocomplete:"off",disabled:!0},model:{value:t.useHourTotal,callback:function(e){t.useHourTotal=t._n(e)},expression:"useHourTotal"}}),a("span",{staticStyle:{margin:"0 10px"}},[t._v("小时")])],1)]),a("el-form-item",{attrs:{label:"提示:"}},[a("p",{staticClass:"tips"},[t._v(t._s(t.submitTips))])])],2),a("div",{staticClass:"footer-btn item"},[a("el-button",{on:{click:t.handleCannel}},[t._v("返回")]),a("el-button",{attrs:{disabled:t.sunmitflag,type:"primary"},on:{click:t.handleDetailHour}},[t._v("修改")])],1)],1),a("div",{staticClass:"infoTwo"})])],1)},o=[],r=(a("d3b7"),a("159b"),a("14d9"),a("79d4")),s=a("6994"),i={data:function(){return{centerDialogVisible:!1,projectList:[],id:null,fillDate:null,settiingsdata:{},useHourTotal:0,hourId:0,sunmitflag:!1,submitTips:"",workTypeSelect:[]}},created:function(){this.setTings()},methods:{open:function(){var t=this;if(null==this.id)return this.$message.error("未填报，请重新选择"),void(this.centerDialogVisible=!1);this.getmyhourdetail(this.id),Object(r["y"])().then((function(e){200==e.code&&(t.workTypeSelect=e.data)})),this.centerDialogVisible=!0},setTings:function(){var t=this;Object(s["b"])().then((function(e){200==e.code&&(t.settiingsdata=e.data)}))},beforeClose:function(){this.useHourTotal=0},handleCannel:function(){this.useHourTotal=0,this.projectList=[],this.centerDialogVisible=!1},getmyhourdetail:function(t){var e=this;Object(r["k"])(t).then((function(t){200==t.code&&(e.submitTips="可以提交",t.data==[]?e.hourId=0:e.hourId=t.data[0].hourId,e.projectList=t.data,console.log(e.projectList),e.projectList.forEach((function(t){e.useHourTotal+=t.useHour,t.hasOwnProperty("workTypeHourList")?null==t.workTypeHourList?t.useHour=0:t.workTypeId=t.workTypeHourList[0].workTypeId:(console.log("对worktypeid进行重新赋值"),t.useHour=0)}))),t.code}))},lookinput:function(t){var e=0;this.projectList.forEach((function(t){return e+=t.useHour+0})),""===t?(console.log(t),this.sunmitflag=!0,this.submitTips="工时不能为空"):0===t&&e<=this.settiingsdata.workTime?(this.submitTips="可以提交!",this.sunmitflag=!1):(console.log("到了",e),this.settiingsdata.overtimeAllow&&e<=24?(this.sunmitflag=!1,this.submitTips="可以提交!（加班）"):e>24?(this.sunmitflag=!0,this.submitTips="工时最大范围为0-24小时!"):e>this.settiingsdata.workTime?(this.sunmitflag=!0,this.submitTips="工时范围为0-".concat(this.settiingsdata.workTime,"小时!")):e<=this.settiingsdata.workTime&&(this.sunmitflag=!1,this.submitTips="可以提交！"))},handleDetailHour:function(){var t=this,e={hourId:this.hourId,projectHours:[]};this.useHourTotal=0,this.projectList.forEach((function(a){t.useHourTotal+=a.useHour;var n={detailId:a.id,hour:a.useHour,projectId:a.projectId,daily:a.daily,workTypeHourList:[{workTypeId:a.workTypeId,hour:a.useHour}]};e.projectHours.push(n)})),this.settiingsdata.overtimeAllow?Object(r["I"])(e).then((function(e){200==e.code?(t.$message.success(e.msg),t.centerDialogVisible=!1):t.$message.danger(e.msg)})):this.useHourTotal>this.settiingsdata.workTime?alert("总计不可超过".concat(this.settiingsdata.workTime,"小时")):Object(r["I"])(e).then((function(e){200==e.code?(t.$message.success(e.msg),t.useHourTotal=0,t.centerDialogVisible=!1):t.$message.danger(e.msg)}))}}},l=i,u=(a("c9ed"),a("2877")),c=Object(u["a"])(l,n,o,!1,null,"2145f74f",null);e["default"]=c.exports},e4d1:function(t,e,a){}}]);