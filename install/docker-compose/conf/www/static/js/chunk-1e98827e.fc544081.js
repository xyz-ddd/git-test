(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1e98827e"],{"3f21":function(t,e,a){"use strict";a.r(e);var l=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"main"},[a("el-card",{staticClass:"box-card"},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("div",{staticClass:"header-title"},[t._v(" 项目工时上报记录 ")]),a("div",{staticClass:"selectBtn"},[a("el-date-picker",{attrs:{format:"yyyy-MM-dd","value-format":"yyyy-MM-dd","default-value":"","default-time":"",align:"right",type:"date",placeholder:"选择日期","picker-options":t.pickerOptions},model:{value:t.taday,callback:function(e){t.taday=e},expression:"taday"}}),a("el-row",{staticStyle:{"margin-left":"20px"}},[a("el-button",{attrs:{type:"primary"},on:{click:t.init}},[t._v("查询")]),a("el-button",{attrs:{type:"primary"},on:{click:t.getdatetaday}},[t._v("今日")]),a("el-button",{attrs:{type:"primary"},on:{click:t.getyesterday}},[t._v("上一日")])],1)],1)]),a("div",{staticClass:"titleInfo"},[a("el-descriptions",{attrs:{title:"统计：",column:4}},[a("el-descriptions-item",{attrs:{label:"上报人数"}},[t._v(t._s(t.headerInfo.fillNum)+"/"+t._s(t.headerInfo.totalPeople))]),a("el-descriptions-item",{attrs:{label:"请假人数"}},[t._v(t._s(t.headerInfo.leaveNum))]),a("el-descriptions-item",{attrs:{label:"缺报人数"}},[t._v(t._s(t.headerInfo.unFillNum)+" ")]),a("el-descriptions-item",{attrs:{label:"总工时"}},[t._v(t._s(t.headerInfo.totalHour)+" 工时")])],1)],1),a("div",{},[a("div",{staticClass:"tipTitle"},[t._v(" 已上报 ")]),a("div",{},[[a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.tableDatafills}},[a("el-table-column",{attrs:{type:"expand"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-form",{staticClass:"demo-table-expand",attrs:{"label-position":"left",inline:!0}},t._l(e.row.projectDetails,(function(e){return a("el-form-item",{key:e.projectId,attrs:{label:e.projectName+":"}},[a("span",[t._v(t._s(e.useHour)+"小时")])])})),1)]}}])}),a("el-table-column",{attrs:{type:"index",label:"序号",width:"180"}}),a("el-table-column",{attrs:{prop:"nickName",label:"姓名",width:"180"}}),a("el-table-column",{attrs:{prop:"postName",label:"职位",width:"180"}}),a("el-table-column",{attrs:{prop:"totalHour",label:"工时",width:"180"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("p",[t._v(t._s(e.row.totalHour)+"小时")])]}}])}),a("el-table-column",{attrs:{prop:"createTime",label:"更新时间"}}),a("el-table-column",{attrs:{prop:"fillTime",label:"上报时间"}})],1),a("pagination",{directives:[{name:"show",rawName:"v-show",value:t.filltotal>0,expression:"filltotal > 0"}],attrs:{total:t.filltotal,page:t.queryParams.pageNum,limit:t.queryParams.pageSize},on:{"update:page":function(e){return t.$set(t.queryParams,"pageNum",e)},"update:limit":function(e){return t.$set(t.queryParams,"pageSize",e)},pagination:t.init}})]],2)]),a("div",{},[a("div",{staticClass:"tipTitle"},[t._v(" 未上报 ")]),a("div",{},[[a("el-row",{attrs:{gutter:24}},[a("el-col",{attrs:{span:12}},[a("div",{staticClass:"grid-content bg-purple"},[a("el-card",{staticClass:"box-card"},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",[t._v("缺报人员")])]),a("div",{staticClass:"text item"},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.tableDatalackNewspaper}},[a("el-table-column",{attrs:{type:"index",label:"序号",width:"180"}}),a("el-table-column",{attrs:{prop:"nickName",label:"姓名",width:"180"}}),a("el-table-column",{attrs:{prop:"postName",label:"职位"}})],1),a("pagination",{directives:[{name:"show",rawName:"v-show",value:t.lackNewspapertotal>0,expression:"lackNewspapertotal > 0"}],attrs:{total:t.lackNewspapertotal,page:t.queryParamslackNewspaper.pageNum,limit:t.queryParamslackNewspaper.pageSize},on:{"update:page":function(e){return t.$set(t.queryParamslackNewspaper,"pageNum",e)},"update:limit":function(e){return t.$set(t.queryParamslackNewspaper,"pageSize",e)},pagination:t.init}})],1)])],1)]),a("el-col",{attrs:{span:12}},[a("div",{staticClass:"grid-content bg-purple-light"},[a("el-card",{staticClass:"box-card"},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",[t._v("请假人员")])]),a("div",{staticClass:"text item"},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.tableDataaskForLeave}},[a("el-table-column",{attrs:{type:"index",label:"序号",width:"180"}}),a("el-table-column",{attrs:{prop:"nickName",label:"姓名",width:"180"}}),a("el-table-column",{attrs:{prop:"postName",label:"职位"}})],1),a("pagination",{directives:[{name:"show",rawName:"v-show",value:t.askForLeavetotal>0,expression:"askForLeavetotal > 0"}],attrs:{total:t.askForLeavetotal,page:t.queryParamsaskForLeave.pageNum,limit:t.queryParamsaskForLeave.pageSize},on:{"update:page":function(e){return t.$set(t.queryParamsaskForLeave,"pageNum",e)},"update:limit":function(e){return t.$set(t.queryParamsaskForLeave,"pageSize",e)},pagination:t.init}})],1)])],1)])],1)]],2)])])],1)},r=[],s=(a("d3b7"),a("159b"),a("68cc")),i={data:function(){return{date:"今日",yesterdayStep:1,tableDatafills:[],tableDatalackNewspaper:[],tableDataaskForLeave:[],headerInfo:{},projectId:"",totalHour:"",taday:"",filltotal:0,lackNewspapertotal:0,askForLeavetotal:0,queryParams:{pageNum:1,pageSize:10},queryParamslackNewspaper:{pageNum:1,pageSize:10},queryParamsaskForLeave:{pageNum:1,pageSize:10},pickerOptions:{disabledDate:function(t){return t.getTime()>Date.now()},shortcuts:[{text:"今天",onClick:function(t){t.$emit("pick",new Date)}},{text:"昨天",onClick:function(t){var e=new Date;e.setTime(e.getTime()-864e5),t.$emit("pick",e)}},{text:"一周前",onClick:function(t){var e=new Date;e.setTime(e.getTime()-6048e5),t.$emit("pick",e)}}]},value1:"",yesterday:""}},created:function(){this.projectId=this.$route.query.projectId,this.taday=this.$route.query.date,this.init()},methods:{init:function(){var t=this;this.queryParams.localDate=this.taday,this.queryParamslackNewspaper.localDate=this.taday,this.queryParamsaskForLeave.localDate=this.taday,Object(s["a"])(this.queryParams).then((function(e){200==e.code&&(t.tableDatafills=e.rows,t.filltotal=e.total)}));var e={localDate:this.taday};Object(s["d"])(e).then((function(e){200==e.code&&(t.headerInfo=e.data,t.headerInfo.totalPeople=t.headerInfo.fillNum+t.headerInfo.leaveNum+t.headerInfo.unFillNum)})),Object(s["c"])(this.queryParamslackNewspaper).then((function(e){200==e.code&&(t.tableDatalackNewspaper=e.rows,t.lackNewspapertotal=e.total)})),Object(s["b"])(this.queryParamsaskForLeave).then((function(e){200==e.code&&(t.tableDataaskForLeave=e.rows,t.askForLeavetotal=e.total)}))},getdatetaday:function(){this.yesterdayStep=1;var t=new Date,e=t.getFullYear(),a=t.getMonth()+1,l=t.getDate();a<10&&(a="0"+a),l<10&&(l="0"+l);var r=e+"-"+a+"-"+l;this.taday=r,this.init()},getyesterday:function(){var t=new Date(this.taday);t.setTime(t.getTime()-864e5);var e=t.getFullYear(),a=t.getMonth()+1,l=t.getDate();a<10&&(a="0"+a),l<10&&(l="0"+l);var r=e+"-"+a+"-"+l;this.taday=r,this.init()},setheaderInfo:function(){var t=this;null!=this.headerInfo.unFills||(this.headerInfo.unFills=[]),null!=this.headerInfo.fills||(this.headerInfo.fills=[]),this.headerInfo.totalPeople=this.headerInfo.fills.length+this.headerInfo.unFills.length,this.headerInfo.fillLength=this.headerInfo.fills.length,this.headerInfo.totalHours=0,this.headerInfo.fills.forEach((function(e){return t.headerInfo.totalHours+=e.useHour}))}}},o=i,n=(a("4919"),a("2877")),c=Object(n["a"])(o,l,r,!1,null,"58b6bb76",null);e["default"]=c.exports},4919:function(t,e,a){"use strict";a("a16b")},"68cc":function(t,e,a){"use strict";a.d(e,"e",(function(){return r})),a.d(e,"a",(function(){return s})),a.d(e,"d",(function(){return i})),a.d(e,"c",(function(){return o})),a.d(e,"b",(function(){return n}));var l=a("b775");function r(t){return Object(l["a"])({url:"/system/project/hour/overall",method:"get",params:t})}function s(t){return Object(l["a"])({url:"/system/project/hour/overall/detail",method:"get",params:t})}function i(t){return Object(l["a"])({url:"/system/project/hour/overall/detail/stat",method:"get",params:t})}function o(t){return Object(l["a"])({url:"/system/project/hour/overall/miss",method:"get",params:t})}function n(t){return Object(l["a"])({url:"/system/project/hour/overall/leave",method:"get",params:t})}},a16b:function(t,e,a){}}]);