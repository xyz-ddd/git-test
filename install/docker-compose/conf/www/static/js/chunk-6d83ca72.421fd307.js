(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-6d83ca72"],{"27a6":function(e,t,a){"use strict";a("b662")},a2bd:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"main"},[a("el-card",{staticClass:"box-card",attrs:{shadow:"never"}},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",[a("div",{staticClass:"selectRows"},[a("el-form",{directives:[{name:"show",rawName:"v-show",value:e.showSearch,expression:"showSearch"}],ref:"queryParams",attrs:{model:e.queryParams,inline:!0}},[a("el-form-item",{attrs:{label:"",prop:"monthDate"}},[a("el-date-picker",{attrs:{"value-format":"yyyy-MM",type:"month",size:"mini",placeholder:"选择月"},on:{change:e.showmonthDate},model:{value:e.queryParams.month,callback:function(t){e.$set(e.queryParams,"month",t)},expression:"queryParams.month"}})],1),a("el-form-item",{attrs:{label:"",prop:"dateTime"}},[a("el-select",{attrs:{size:"mini",clearable:"",disabled:e.showDay,placeholder:"请选择日"},on:{change:e.showdateTime},model:{value:e.queryParams.date,callback:function(t){e.$set(e.queryParams,"date",t)},expression:"queryParams.date"}},e._l(e.day,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),a("el-form-item",{attrs:{label:"",prop:"value"}},[a("el-select",{attrs:{size:"mini",clearable:"",placeholder:"请选择阶段"},model:{value:e.queryParams.projectStatus,callback:function(t){e.$set(e.queryParams,"projectStatus",t)},expression:"queryParams.projectStatus"}},e._l(e.phase,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),a("el-form-item",{attrs:{label:"",prop:"personnelvalue"}},[a("el-select",{attrs:{clearable:"",size:"mini",placeholder:"请选择人员"},model:{value:e.queryParams.userId,callback:function(t){e.$set(e.queryParams,"userId",t)},expression:"queryParams.userId"}},e._l(e.personnel,(function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1)],1),a("el-form-item",{attrs:{label:"",prop:"positionvalue"}},[a("el-select",{attrs:{clearable:"",placeholder:"请选择岗位",size:"mini"},model:{value:e.queryParams.postId,callback:function(t){e.$set(e.queryParams,"postId",t)},expression:"queryParams.postId"}},e._l(e.position,(function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1)],1),a("el-form-item",[a("el-button",{attrs:{type:"primary",icon:"el-icon-search",size:"mini"},on:{click:e.toSearch}},[e._v("搜索")]),a("el-button",{attrs:{icon:"el-icon-refresh",size:"mini"},on:{click:function(t){return e.resetQuery("queryParams")}}},[e._v("重置")])],1)],1)],1)]),a("hr")]),a("div",{staticClass:"text item"},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData}},[a("el-table-column",{attrs:{type:"index",label:"序号",width:"60"}}),a("el-table-column",{attrs:{prop:"costDate",label:"时间",width:"180"}}),a("el-table-column",{attrs:{prop:"projectStatus",label:"阶段",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",["a"==t.row.projectStatus?a("p",[a("el-tag",{attrs:{type:"primary"}},[e._v("进行中")])],1):"b"==t.row.projectStatus?a("p",[a("el-tag",{attrs:{type:"warning"}},[e._v("运维中")])],1):"c"==t.row.projectStatus?a("p",[a("el-tag",{attrs:{type:"success"}},[e._v("已结束")])],1):e._e()])]}}])}),a("el-table-column",{attrs:{prop:"nickName",label:"人员",width:"120"}}),a("el-table-column",{attrs:{prop:"postName",label:"岗位",width:"180"}}),a("el-table-column",{attrs:{prop:"useHour",label:"工时",width:"120"}}),a("el-table-column",{attrs:{prop:"postCost",label:"岗位成本",width:"180"}}),a("el-table-column",{attrs:{prop:"userCost",label:"人员成本"}})],1)],1)])],1)},s=[],o=(a("d3b7"),a("159b"),a("14d9"),a("e9c4"),a("b775"));function l(e){return Object(o["a"])({url:"/mh/cost/query",method:"get",params:e})}function i(e){return Object(o["a"])({url:"/mh/cost/project/posts?projectId="+e,method:"get"})}function n(e){return Object(o["a"])({url:"/mh/cost/project/users?projectId="+e,method:"get"})}var u={data:function(){return{projectId:"",totalHour:0,toatalCost:0,showDay:!0,day:[],phase:[],personnel:[],personnelvalue:"",position:[],positionvalue:"",value:"",showSearch:!0,queryParams:{pageNum:1,pageSize:10,projectId:"",date:void 0,month:void 0,postId:void 0,projectStatus:void 0,userId:void 0},initqueryParams:{pageNum:1,pageSize:10,projectId:""},tableData:[]}},created:function(){this.projectId=this.$route.query.projectId,this.queryParams.projectId=this.$route.query.projectId,this.initqueryParams.projectId=this.$route.query.projectId,this.setDay(),this.setPhase(),this.init()},methods:{init:function(){var e=this;l(this.queryParams).then((function(t){200==t.code&&(e.tableData=t.rows,e.totalHour=0,e.toatalCost=0,e.tableData.forEach((function(t){null==t.useHour&&(t.useHour=0),e.totalHour+=t.useHour,e.toatalCost+=t.userCost})))})),i(this.projectId).then((function(t){200==t.code&&(e.position=t.data)})),n(this.projectId).then((function(t){200==t.code&&(e.personnel=t.data)}))},setDay:function(){for(var e=[],t=1;t<=31;t++){var a={label:t,value:t};e.push(a)}this.day=e},setPhase:function(){var e=[{label:"进行中",value:"a"},{label:"运维中",value:"b"},{label:"已结束",value:"c"}];this.phase=e},initForm:function(){this.queryParams=Object.assign({},JSON.parse(JSON.stringify(this.queryParams)))},toSearch:function(){this.initForm(),this.init()},showmonthDate:function(e){this.showDay=null==e},showdateTime:function(e){e<10&&(e="0"+e),this.queryParams.date=this.queryParams.month+"-"+e},showpersonnel:function(){this.queryParams.userId=this.personnelvalue},showposition:function(){this.queryParams.postId=this.positionvalue},resetQuery:function(e){this.showDay=!0,this.resetForm(e);var t={pageNum:1,pageSize:10,projectId:this.projectId,date:void 0,month:void 0,postId:void 0,projectStatus:void 0,userId:void 0};this.queryParams=t,this.init()}}},c=u,p=(a("27a6"),a("2877")),d=Object(p["a"])(c,r,s,!1,null,"144be276",null);t["default"]=d.exports},b662:function(e,t,a){}}]);