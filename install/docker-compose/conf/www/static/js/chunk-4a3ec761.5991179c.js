(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4a3ec761"],{"2cb2":function(e,t,n){},b0af:function(e,t,n){"use strict";n("2cb2")},b604:function(e,t,n){"use strict";n.d(t,"e",(function(){return i})),n.d(t,"f",(function(){return r})),n.d(t,"a",(function(){return s})),n.d(t,"d",(function(){return c})),n.d(t,"k",(function(){return a})),n.d(t,"c",(function(){return u})),n.d(t,"b",(function(){return l})),n.d(t,"g",(function(){return d})),n.d(t,"l",(function(){return g})),n.d(t,"h",(function(){return f})),n.d(t,"i",(function(){return m})),n.d(t,"j",(function(){return p}));var o=n("b775");function i(e){return Object(o["a"])({url:"/system/project/user/my/project/all",method:"get",param:e})}function r(e){return Object(o["a"])({url:"/pr/proto/list",method:"get",params:e})}function s(e){return Object(o["a"])({type:"form",url:"/pr/proto/create",method:"post",data:e})}function c(e){return Object(o["a"])({url:"/pr/proto/delete?id="+e,method:"get"})}function a(e){return Object(o["a"])({url:"/pr/doc/query?protoId="+e,method:"get"})}function u(e){return Object(o["a"])({url:"/pr/doc/delete?id="+e,method:"delete"})}function l(e){return Object(o["a"])({url:"/pr/proto/record/delete?id="+e,method:"delete"})}function d(e){return Object(o["a"])({url:"/pr/proto/record/list?protoId="+e,method:"get"})}function g(e){return Object(o["a"])({type:"form",url:"/pr/proto/update",method:"put",data:e})}function f(e){return Object(o["a"])({url:"/pr/sketch/list?prototypeId="+e,method:"get"})}function m(e){return Object(o["a"])({url:"/pr/sketch/files?sketchId="+e,method:"get"})}function p(e){return Object(o["a"])({url:"/pr/sketch/delete?id="+e,method:"delete"})}},b8e6:function(e,t,n){"use strict";n.r(t);var o=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{directives:[{name:"loading",rawName:"v-loading.fullscreen.lock",value:e.fullscreenLoading,expression:"fullscreenLoading",modifiers:{fullscreen:!0,lock:!0}}],staticClass:"mian"},[n("div",{staticClass:"slide_pc"},[n("el-carousel",{attrs:{height:"37vw",trigger:"click",arrow:"always",autoplay:!1},on:{change:e.loadAnimate}},e._l(e.urls,(function(e,t){return n("el-carousel-item",{key:t},[n("figure",[n("img",{staticClass:"elImg",attrs:{src:e.fileUrl}})])])})),1)],1),n("el-divider"),n("div",{staticClass:"nav-btn"},[n("span",[e._v("导航：")]),n("span",[n("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.download}},[e._v("全部下载")])],1)]),n("div",{staticClass:"demo-image"},e._l(e.urls,(function(t,o){return n("div",{key:o,staticClass:"block"},[n("span",{staticClass:"demonstration"},[e._v(e._s(t.fileName))]),n("el-image",{staticStyle:{width:"100px",height:"100px"},attrs:{src:t.fileUrl}})],1)})),0)],1)},i=[],r=(n("d3b7"),n("159b"),n("14d9"),n("b604")),s=n("d4ec"),c=n("bee2"),a=n("c4e3"),u=n.n(a),l=(n("21a6"),function(){function e(t){Object(s["a"])(this,e);var n={imgSrcList:[],imgBase64:[],imageSuffix:[],imgName:[],scheduleMsg:"",errorMsg:"",onProgress:this.onProgress,onSuccess:this.onSuccess,onError:this.onError};this.option=Object.assign({},n,t),this.start()}return Object(c["a"])(e,[{key:"start",value:function(){var e=this,t=0;this.option.imgSrcList.forEach((function(n){var o=n.substring(n.lastIndexOf(".")),i=n.substring(n.lastIndexOf("/"),n.lastIndexOf("."));e.option.imageSuffix.push(o),e.option.imgName.push(i),e.getBase64(n).then((function(n){e.option.imgBase64.push(n.substring(22)),t+=1,e.option.scheduleMsg=t+"/"+e.option.imgSrcList.length,e.option.onProgress&&e.option.onProgress(e.option.scheduleMsg)})).catch((function(t){console.log(t),e.option.onError&&e.option.onError(t)}))})),this.zipSaveFile()}},{key:"getBase64",value:function(e){var t=this;return new Promise((function(n,o){var i=new Image;i.crossOrigin="Anonymous",i.src=e,e?i.onload=function(){return n(t.getBase64Image(i))}:o("转换base64失败")}))}},{key:"getBase64Image",value:function(e,t,n){var o=document.createElement("canvas");o.width=t||e.width,o.height=n||e.height;var i=o.getContext("2d");i.drawImage(e,0,0,o.width,o.height);var r=o.toDataURL("image/jpeg",.9);return r}},{key:"zipSaveFile",value:function(){var e=this,t=new u.a,n=t.folder("images");setTimeout((function(){e.option.imgSrcList.length==e.option.imgBase64.length?(e.option.imgSrcList.forEach((function(t,o){n.file(e.option.imgName[o]+e.option.imageSuffix[o],e.option.imgBase64[o],{base64:!0})})),t.generateAsync({type:"blob"}).then((function(t){var n=String((new Date).getTime())+".zip";status=saveAs(t,n),e.option.onSuccess&&e.option.onSuccess(),e.option.scheduleMsg=""}))):e.zipSaveFile()}),100)}},{key:"onProgress",value:function(e){console.log("onProgressutils",e)}},{key:"onSuccess",value:function(e){console.log("onSuccess:",e)}},{key:"onError",value:function(e){console.error("onError",e)}}]),e}()),d=l,g={data:function(){return{urls:[],id:null,fullscreenLoading:!1}},mounted:function(){this.setStyle()},created:function(){this.id=this.$route.query.id,this.init()},methods:{setStyle:function(){var e=document.getElementsByClassName("sidebar-container"),t=document.getElementsByClassName("fixed-header"),n=document.getElementsByClassName("hasTagsView"),o=document.getElementsByClassName("app-main");e[0].style.display="none",t[0].style.display="none",n[0].style.marginLeft="0px",o[0].style.paddingTop="0px"},loadAnimate:function(){console.log("loadAnimate")},init:function(){var e=this;console.log(this.id),Object(r["i"])(this.id).then((function(t){console.log("listProtoSketch",t),200==t.code&&(e.urls=t.data,e.urls.forEach((function(e){e.fileUrl="api"+e.fileUrl})))}))},download:function(e){console.log(e),console.log(this.urls);var t=this;t.imgSrcList=[],this.urls.forEach((function(e){t.imgSrcList.push(e.fileUrl)}));var n=this.$loading({lock:!0,text:"拼命下载中",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.7)"});t.downloadState=!0,new d({imgSrcList:t.imgSrcList,onError:function(e){console.log(e)},onProgress:function(e){console.log("onProgressimgs",e)},onSuccess:function(e){console.log("onSuccess",e),n.close()}})}}},f=g,m=(n("b0af"),n("2877")),p=Object(m["a"])(f,o,i,!1,null,"b36303de",null);t["default"]=p.exports}}]);